<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="css/images/webglobe-logo_32.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Bootstrap CSS-->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!--JQuery UI-->
    <link rel="stylesheet" type="text/css" href="css/libs/jquery-ui/v1.11.4/jquery-ui.min.css"/>
    <!-- JQuery-Growl plugin for growl style messages-->
    <link rel="stylesheet" type="text/css" href="css/libs/jquery-plugins/jquery.growl.css"/>
    <!--Local Stylesheet-->
    <link rel="stylesheet" href="css/stylesheet.css"/>
    <!--Perfect Scrollbar CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/css/perfect-scrollbar.min.css"/>
    <!--Font Awesome-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <title>WebGlobe 2.0</title>
  </head>
  <body>
    <div id="infoAlert" style="display:none;" class="alert alert-success topalert">
    </div>
    <ul class="tab"
	style="z-index: 999; position: fixed; left: 0; height: 38px; width: 100%; background: rgba(46,74,110,1); overflow: visible">
      <li>
	<a class="tablinksLeft" onclick="openTabLeft(event, 'layers')" title="Current Layers">
	  <i class="fa fa-globe" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksLeft" onclick="openTabLeft(event, 'datasets')" title="Climate Datasets">
	  <i class="fa fa-sun-o" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksRight" style="position: fixed; right: 22%; width: 3%;" onclick="openTabRight(event,'datasets1')" title="Show Datasets">
	  <i class="fa fa-database" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksRight" style="position: fixed; right: 19%; width: 3%;" onclick="openTabRight(event,'charts')" title="Plot Charts">
	  <i class="fa fa-line-chart" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksRight" style="position: fixed; right: 16%; width: 3%;" onclick="openTabRight(event,'upload')" title="Add Data Set">
	  <i class="fa fa-cloud-upload" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksRight" id="projectionSwitch" style="position: fixed;right: 13%; width: 3%;" title="2D/3D Switch" data-bind="click: $root.changeProjection">
	  <i class="fa fa-map" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksRight" id="accountManagement" style="position: fixed; right: 10%; width: 3%;" onclick="openTabRight(event, 'account')" title="Account Management">
	  <i class="fa fa-user" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksRight" style="position: fixed; right: 7%; width: 3%;" onclick="openTabRight(event, 'info')" title="Info">
	  <span class="glyphicon glyphicon-info-sign"></span>
	</a>
      </li>
      <li>
	<a class="tablinksRight" style="position: fixed; right: 4%; width: 3%;" onClick="window.open('https://federatedcloud.org/using/federationstatus.php');" title="Cloud Status">
	  <i class="fa fa-tachometer" aria-hidden="true"></i>
	</a>
      </li>
      <li>
	<a class="tablinksRight" style="position: fixed; right: 1%; width: 3%;" onclick="parent.location='logout.jsp'" title="Sign Out">
	  <i class="fa fa-sign-out" aria-hidden="true"></i>
	</a>
      </li>
    </ul>
    <div class="container containerFont">
      <div class="col-sm-8" id="globe" style="width: 100%; height: 100%; position: fixed; left: 0">
	<canvas id="canvasOne" width="1920" height="1080" style="position: fixed; left: 0; width: 100%; height: 100%">
	  Your browser does not support HTML5 Canvas.
	</canvas>
      </div>
      <div id="info" class="col-sm-2 tabcontentRight rightTabPadding" style="font-size: 12px !important; width: 25% !important;background: rgba(46,74,110,0.8)">
	<br/>
	<div style="text-align: center">
	  <div><img src="./css/images/ublogo.svg" style="width: 45%;height: 5%; padding-left: 3.5%"></div>
	</div>
	<hr/>
	<h3 style="text-align:center;font-size: 20px !important;"><em><strong>WebGlobe v2.0</strong></em></h3>
	<p style="text-align: center; font-size: 12px;">
	Developed at University at Buffalo (SUNY).
	<br/> 
	Powered by Aristotle Cloud.
	</p>
	<p style="text-align: justify">
	This is a tool to visualize and analyze simulation and observation data stored as NetCDF files.
	</p>
	<h5 style="text-align: center">
	  <i class="fa fa-github" aria-hidden="true"></i><a href="https://github.com/chandola/webglobeserver" target="_blank" style="color: #FFFFFF; padding-right: 2%">Source</a>
	</h5>
	<h5 style="text-align:center; font-size: 10px;"><strong>App Developers:</strong>
	  <br/>
	  <a href="https://github.com/chandola" style="color: #FFFFFF">Varun Chandola</a>
	  &amp; <a href="https://github.com/tdinhvn" style="color: #FFFFFF">Dinh Tran</a>
	</h5>
      </div>

      <div id="layers" class="col-sm-2 tabcontentLeft leftTabPadding" style="font-size: 10px !important; padding-bottom: 25% !important;">
	<div class="section-heading">
	  <h4 class="sub-header">
	    <span class="glyphicon glyphicon-list" aria-hidden="true" style="padding-right:5px;"></span>
	    Layers
	    <a class="section-toggle" data-toggle="collapse" href="#layers-body">
	    </a>
	  </h4>
	</div>
	<div id="layers-body" class="section-body collapse in">
	  <div class="panel panel-default">
	    <div class="panel-collapse collapse in" id="base-layers-panel">
	      <div data-bind="template: { name: 'layer-template', foreach: baseLayers}"></div>
	    </div>
	  </div>
	</div>
      </div>
      <div id="datasets1" class="col-sm-8 col-sm-4 panel tabcontentRight rightTabPadding" style="padding:2px;font-size: 8px !important;width: 35%;  padding-bottom: 25% !important;">
	<div class="section-heading">
	  <h4 class="sub-header">
	    <span class="glyphicon glyphicon-refresh" data-bind="click: populateDatasets;" aria-hidden="true" style="padding-right:5px;"></span>
	    Available Datasets 
	  </h4>
	</div>
	<div id="datasets1-body" class="section-body collapse in">
	  <div class="panel-heading panel-heading-white">
	    <select name="datasetSelect" data-bind="options: availableDatasets.name" id="fieldSelect"></select>
	    <ul class="nav nav-pills">
	      <li class="active"><a data-toggle="pill" href="#dataset-load">Home</a></li>
	      <li><a data-toggle="pill" href="#dataset-animate">Animate</a></li>
	      <li><a data-toggle="pill" href="#dataset-analyze">Analyze</a></li>
	    </ul>
	    <div class="tab-content">
	      <div id="dataset-load" class="tab-pane fade in active">
		<h3>Load</h3>
	      </div>
	      <div id="dataset-animate" class="tab-pane fade">
		<h3>Animate</h3>
	      </div>
	      <div id="dataset-analyze" class="tab-pane fade">
		<h3>Analyze</h3>
	      </div>
	    </div>
	  </div>

	</div>
      </div>
      <!--div id="datasets" class="col-sm-2 tabcontentLeft leftTabPadding" style="font-size: 10px !important; padding-bottom: 25% !important;">
	<div class="section-heading">
	  <h4 class="sub-header">
	    <span class="glyphicon glyphicon-refresh" data-bind="click: populateDatasets;" aria-hidden="true" style="padding-right:5px;"></span>
	    Available Datasets 
	  </h4>
	</div>
	<div id="datasets-body" class="section-body collapse in">
	  <div id="available-datasets-panel">
	    <div data-bind="template: { name: 'dataset-template', foreach: availableDatasets}"></div>
	  </div>

	  <div id="datasetInfo" style="display: none;" class="alert alert-info alert-dismissible">
	  </div>
	  <div id="datasetOpenPanel" style="display: none;" class="alert alert-success alert-dismissible">
	    <form role="form" id="showDatasetForm" class="form-inline">
	      <label for="fieldSelect">Variable</label>
	      <select name="fieldSelect" data-bind="options: fields" id="fieldSelect"></select>
	      <span style="padding: 3px;" data-bind="click: $root.displayTimePanel"><i class="fa fa-arrow-right" aria-hidden="true"></i></span>
	    </form>
	    <div id="selectTimePanel" style="display: none;">
	      <div class="input-group" align="center">
		<form>
		  <div class="form-group">
		    <div class="input-group-addon"><i class="fa fa-chevron-left" aria-hidden="true"></i>
		      <input type="date date-sm" id="load-start-date"/></div>
		  </div>
		  <div class="form-group">
		    <div class="input-group-addon"><i class="fa fa-chevron-right" aria-hidden="true"></i>
		      <input type="date date-sm" id="load-end-date"/></div>
		  </div>
		  <button type="button" class="btn btn-primary btn-sm" id="load-images"
							 data-bind="click: $root.loadImages,css: {active: $root.isNotLoaded">
		    Load Images
		  </button>                                      
		</form>                               
		<!--div class="container"-->
		  <div id="player" class="player text-center">
		    <button type="button" id="button_bbw" class="btn btn-sm" data-bind="click: $root.showFirst">
		      <i class="fa fa-fast-backward"></i>
		    </button>

		    <button type="button" id="button_bw" class="btn btn-sm" data-bind="click: $root.showPrevious">
		      <i class="fa fa-backward"></i>
		    </button>

		    <button type="button" id="button_play" class="btn btn-sm" data-bind="click: $root.play">
		      <i class="fa fa-play"></i>
		    </button>

		    <button type="button" id="button_stop" class="btn btn-sm" data-bind="click: $root.stop">
		      <i class="fa fa-stop"></i>
		    </button>

		    <button type="button" id="button_fw" class="btn btn-sm" data-bind="click: $root.showNext">
		      <i class="fa fa-forward"></i>
		    </button>

		    <button type="button" id="button_ffw" class="btn btn-sm" data-bind="click: $root.showLast">
		      <i class="fa fa-fast-forward"></i>
		    </button>    
		  </div>
	      </div>	    
	    </div>	    
	  </div>
	  <div id="analysisPanel" style="display: none;" class="alert alert-danger alert-dismissible">
	    <form role="form" id="analysisForm">
	      <div class="form-group row" style="padding: 5px;">
		<label for="fieldAnalysisSelect" class="col-2 col-form-label">Variable</label>
		<div class="col-4">
		  <select name="fieldAnalysisSelect" data-bind="options: analysisFields" id="fieldAnalysisSelect"></select>
		</div>
	      </div>
	      <div class="form-group row" style="padding: 5px;">
		<label for="analysisSelect" class="col-2 col-form-label">Analysis</label>
		<div class="col-4">
		  <select name="analysisSelect" data-bind="options: analysisMethods" id="analysisSelect"></select>
		</div>
	      </div>
	      <div class="form-group row" style="padding: 5px;">
		<label for="analysisOutputName" class="col-2 col-form-label">Output Name</label>
		<div class="col-4">
		  <input type="text" name="analysisOutputName" class="form-control input-sm" id="analysisOutputName"/>
		</div>
	      </div>
	      <div class="form-group row" style="padding: 5px;">
		<button type="button" class="btn btn-primary btn-sm" id="analyzeDataset" data-bind="click: $root.analyzeDataset">Analyze</button>       
	      </div>
	    </form>
	  </div>
	</div>
      </div-->
      <div id="account" class="col-sm-12 col-sm-4 panel tabcontentRight rightTabPadding" style="padding:2px;font-size: 12px !important;width: 35%;  padding-bottom: 25% !important;">
	<h4 style="text-align:center;">Welcome <span data-bind="text: userName"></span></h4>	
	<hr/>
	<div class="panel panel-default">
	  <div class="panel-heading">
	    <div style="text-align:center;">Status of submitted analysis jobs <span class="glyphicon glyphicon-refresh" style="padding: 3px;" data-bind="click: $root.getSubmittedAnalysisJobs"></span></div>
	  </div>
	  <div class="panel-body">
	    <h4 style="text-align:center;">Analysis Jobs</h4>
	    <table class="table-bordered table-striped table-hover table-sm" style="font-size: 10px; text-align: center;">
	      <thead>
		<tr><th></th><th>Dataset</th><th>Analysis</th><th>Submitted</th><th>Finished</th><th>Output</th><th>Status</th></tr>
	      </thead>
	      <tbody data-bind="foreach: submittedAnalysisJobs">
		<tr data-bind="click: function() {$root.getSubmittedAnalysisJobInfo($data.result_loc)}">
		  <td data-bind="text: $data.index"></td>
		  <td data-bind="text: $data.name"></td>
		  <td data-bind="text: $data.analysis+' ('+$data.field+')'"></td>
		  <td data-bind="text: $data.submission_time"></td>
		  <td data-bind="text: $data.finish_time"></td>
		  <td data-bind="text: $data.result_loc.substring(0,10)"></td>
		  <td data-bind="text: $data.status"></td>
		</tr>
	      </tbody>
	    </table>
	  </div>
	  <div class="panel-heading">
	    <div style="text-align:center;">Status of submitted upload jobs <span class="glyphicon glyphicon-refresh" style="padding: 3px;" data-bind="click: $root.getSubmittedUploadJobs"></span></div>
	  </div>
	  <div class="panel-body">
	    <h4 style="text-align:center;">Data Upload Jobs</h4>
	    <table class="table-bordered table-striped table-hover table-sm" style="font-size: 10px; text-align: center;">
	      <thead>
		<tr><th></th><th>Dataset</th><th>Submitted</th><th>Finished</th><th>Status</th></tr>
	      </thead>
	      <tbody data-bind="foreach: submittedUploadJobs">
		<tr>
		  <td data-bind="text: $data.index"></td>
		  <td data-bind="text: $data.dataset_name"></td>
		  <td data-bind="text: $data.submission_time"></td>
		  <td data-bind="text: $data.finish_time"></td>
		  <td data-bind="text: $data.status"></td>
		</tr>
	      </tbody>
	    </table>
	  </div>
	</div>
      </div>
      <div id="upload" class="col-sm-8 col-sm-4 panel tabcontentRight rightTabPadding" style="padding:2px;font-size: 8px !important;width: 35%;  padding-bottom: 25% !important;">
	<div class="panel panel-default">
	  <div class="panel-body">
	    <form>
	      <div class="form-group">
		<div class="input-group-addon"><i class="fa fa-folder" aria-hidden="true"></i><span> URL</span></div>
		<input type="text" class="form-control form-control-sm" id="url"/>
	      </div>
	      <div class="form-group">
		<button type="button" class="btn btn-primary btn-sm" id="probe-data" data-bind="click: $root.probeData">Probe <i id="probe-spinner" style="display: none;" class="fa fa-spinner fa-spin fa-fw"></i></button>       
	      </div>
	      <div class="form-group">
		<div class="input-group-addon"><span>Dataset Name</span></div>
		<input type="text" class="form-control form-control-sm" id="upload-dataName"/>
	      </div>
	      <div class="form-group">
		<div class="input-group-addon"><i class="fa fa-info" aria-hidden="true"></i><span> Data set Description</span></div>
		<textarea class="form-control" id="upload-dataInfo" rows="3"></textarea>
	      </div>
	      <div class="form-group">
		<div class="input-group-addon"><i class="fa fa-firefox" aria-hidden="true"></i><span> URL for More Information</span></div>
		<input type="text" class="form-control form-control-sm" id="upload-dataInfoURL"/>
	      </div>
	      <div class="form-group">
		<div class="input-group-addon"><i class="fa fa-th" aria-hidden="true"></i><span> Select Colormap</span></div>
		<select class="form-control" data-bind="options: availableColormaps" id="upload-select-colormap">
		</select>
	      </div>
	      <div class="form-group">
		<input type="checkbox" class="form-check-input" id="upload-visualization-only"/>
		<span style="color: black;font-size:12px"> Visualization Only?</span>
	      </div>
	      <div class="form-group">
	      <button type="button" class="btn btn-primary btn-sm" id="upload-data" data-bind="click: $root.uploadData">Upload</button>       
	      </div>
	    </form>                               
	  </div>
	</div>
      </div>
    </div>
    <div id="charts" class="col-sm-2 tabcontentRight" style="width: 35% !important;">
      <button type="button" id="clearChart" class="btn btn-sm" data-bind="click: $root.clearChart">
	<i class="fa fa-trash"></i>
      </button>
      <div id="innerChart" style="width:600px;height:250px;" >
      </div>
    </div>

    <script type="text/html" id="layer-template">
<div class="btn-group btn-block">
	<!--Layer name and visibility button-->
	<button type="button"
	class="btn btn-default layer-name wrap-panel-heading btn-xs"
	style="display: block; width: 98%;"
	data-bind="click: $root.onToggleLayer, css: {active: $data.enabled()}">
	<span class="glyphicon pull-left"
	data-bind="css: {'glyphicon-eye-open': $data.enabled(), 'glyphicon-eye-close': !$data.enabled()}"></span>
	<span class="layer" data-bind="text: $data.name()"></span>
	</button>
	</div>
    </script>
    <script type="text/html" id="dataset-template">
<div data-bind="style: { background: $data.user_data ? '#C3D9FF' : 'white' }" class="panel panel-info" style="padding:1px;">
	<span class="dataset" data-bind="text: $data.name"></span>
	<a href="#" data-bind="click: $root.showInfo" class="dataset-action"><span class="glyphicon glyphicon-info-sign"></span></a>
	<a href="#" data-bind="click: $root.showDatasetPanel" class="dataset-action"><span class="glyphicon glyphicon-eye-open"></span></a>
	<a href="#" data-bind="click: $root.showAnalysisPanel" class="dataset-action"><span class="glyphicon glyphicon-wrench"></span></a>
	<a href="#" class="dataset-action"><span class="glyphicon glyphicon-trash"></span></a>
	</div>
    </script>

    <!--Spin.js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>
    <!--JQuery and JQuery UI-->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <!--Bootstrap-->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--Perfect Scrollbar-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.12/js/perfect-scrollbar.jquery.js"></script>
    <!--Plotly.js-->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!--Require.js and main app-->
    <script data-main="js/main" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.17/require.min.js"></script>
    <!--UI Controls-->
    <script type="text/javascript" src="js/ui_controls.js"></script>
  </body>
</html>
